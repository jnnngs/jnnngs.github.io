<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Azure Private Endpoints Vs Service Endpoints - jnnngs</title><meta name="description" content="Following a deep dive into the world of Azure endpoints, I found it interesting that there is a misconception of the primary uses (and any secondary uses) of Azure Private Endpoints. It seems that they are being used when a Service Endpoint is perfectly suitable&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://jnnn.gs/azure-private-endpoints-vs-service-endpoints.html"><link rel="alternate" type="application/atom+xml" href="https://jnnn.gs/feed.xml"><link rel="alternate" type="application/json" href="https://jnnn.gs/feed.json"><meta property="og:title" content="Azure Private Endpoints Vs Service Endpoints"><meta property="og:site_name" content="jnnngs"><meta property="og:description" content="Following a deep dive into the world of Azure endpoints, I found it interesting that there is a misconception of the primary uses (and any secondary uses) of Azure Private Endpoints. It seems that they are being used when a Service Endpoint is perfectly suitable&hellip;"><meta property="og:url" content="https://jnnn.gs/azure-private-endpoints-vs-service-endpoints.html"><meta property="og:type" content="article"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--logo-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--menu-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://jnnn.gs/assets/css/style.css?v=2405d04b119f74cf51b884beb85eb424"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://jnnn.gs/azure-private-endpoints-vs-service-endpoints.html"},"headline":"Azure Private Endpoints Vs Service Endpoints","datePublished":"2021-01-15T09:19","dateModified":"2021-05-20T16:39","description":"Following a deep dive into the world of Azure endpoints, I found it interesting that there is a misconception of the primary uses (and any secondary uses) of Azure Private Endpoints. It seems that they are being used when a Service Endpoint is perfectly suitable&hellip;","author":{"@type":"Person","name":"Jnnngs"},"publisher":{"@type":"Organization","name":"Jnnngs"}}</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://jnnn.gs/">jnnngs</a></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2021-01-15T09:19">January 15, 2021</time></div><h1>Azure Private Endpoints Vs Service Endpoints</h1></div></header></div><div class="wrapper post__entry"><p>Following a deep dive into the world of Azure endpoints, I found it interesting that there is a misconception of the primary uses (and any secondary uses) of Azure Private Endpoints. It seems that they are being used when a Service Endpoint is perfectly suitable (and free) to use. I have lightly written this up as a reminder for me in future and if its of use for anyone else.</p><p>The following is broken up between Public, Private and Service endpoints. I'll try and capture the primary use case for each, pros and cons and anything further of interest. As this topic is vast, there are bound to be a few things not covered but I shall intent to keep this topic updated as and when its useful to do so.</p><p><a href="https://www.youtube.com/watch?v=4v-9zGHxVeI" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=4v-9zGHxVeI</a></p><h2>Public Endpoint</h2><figure class="post__image"><img loading="lazy" src="https://jnnn.gs/media/posts/5//PublicEndpoint.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://jnnn.gs/media/posts/5//responsive/PublicEndpoint-xs.png 300w, https://jnnn.gs/media/posts/5//responsive/PublicEndpoint-sm.png 480w, https://jnnn.gs/media/posts/5//responsive/PublicEndpoint-md.png 768w, https://jnnn.gs/media/posts/5//responsive/PublicEndpoint-lg.png 1024w, https://jnnn.gs/media/posts/5//responsive/PublicEndpoint-xl.png 1360w, https://jnnn.gs/media/posts/5//responsive/PublicEndpoint-2xl.png 1600w" alt="Public Endpoint" width="436" height="644"><figcaption>Figure: #1 Public Endpoint</figcaption></figure><p>Traffic is routed over the internet, using the public IP endpoints.</p><p><strong>When to use Public Endpoints</strong>:<br>  <br>When secure but public internet routing  isn't an issue for either direct to Storage account or via VNET components.</p><p><strong>Pros</strong></p><p>1.Simple solution</p><p>2.Storage account options to control networking connection type (TLS version) and source access via Firewalls and virtual networks (public internet, VNETs)</p><p>3.No additional costs</p><p><strong>Cons</strong></p><p>1.Traffic routed over public internet (if this is an issue)</p><h2>Private Endpoint</h2><figure class="post__image"><img loading="lazy" src="https://jnnn.gs/media/posts/5/PrivateEndpoint-2.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://jnnn.gs/media/posts/5/responsive/PrivateEndpoint-2-xs.png 300w, https://jnnn.gs/media/posts/5/responsive/PrivateEndpoint-2-sm.png 480w, https://jnnn.gs/media/posts/5/responsive/PrivateEndpoint-2-md.png 768w, https://jnnn.gs/media/posts/5/responsive/PrivateEndpoint-2-lg.png 1024w, https://jnnn.gs/media/posts/5/responsive/PrivateEndpoint-2-xl.png 1360w, https://jnnn.gs/media/posts/5/responsive/PrivateEndpoint-2-2xl.png 1600w" alt="Private Endpoint" width="425" height="572"><figcaption>Figure: #2 Private Endpoint</figcaption></figure><p>Azure Private Endpoint is a network interface that connects you privately and securely to a service powered by Azure Private Link. Private Endpoint uses a private IP address from your VNet, effectively bringing the service into your VNet. You can think of this as a new virtual network card on the PaaS component (e.g. Storage account) which is then assigned to the VNET/Subnet. This addresses the main exam question of accessing an Azure PaaS component <strong>DIRECTLY</strong> via Express Route or Site-To-Site VPN and not having to target the public IP endpoint. A service endpoint doesn't solve this problem.</p><p><a href="https://docs.microsoft.com/en-us/azure/private-link/private-endpoint-overview" target="_blank" rel="noopener noreferrer">https://docs.microsoft.com/en-us/azure/private-link/private-endpoint-overview</a></p><div><a href="https://youtu.be/uBN3AVARUiI?t=110" target="_blank" rel="noopener noreferrer">https://youtu.be/uBN3AVARUiI?t=110</a></div><p><strong>When to use Private Endpoints</strong>:<br>  <br>When non-public internet access is required to an Azure PaaS component via express route or S2S VPN. Other uses are possible, but a standard Service Endpoint should be considered as a Private Endpoint is likely to be overkill for a non-express route or S2S VPN use case.</p><p><strong>Pros</strong></p><p>1.Private address used</p><p>2.No public internet traffic or public IP is present</p><p>3.Optional data exfiltration, locking private access directly to the storage account instance, preventing communications with other instances</p><p><strong>Cons</strong></p><p>1.Dependant on scenario, the set-up can be <strong>significantly </strong>more involved than service endpoints*</p><p>2.Charges per hour, inbound traffic and outbound traffic</p><p>3.NSG is not supported on private endpoints</p><p>4.Targets a specific use case</p><p>5.Each storage account (and type) needs its own private endpoint</p><p>*It's important to correctly configure your DNS settings to resolve the private endpoint IP address to the fully qualified domain name (FQDN) of the connection string. Existing Microsoft Azure services might already have a DNS configuration for a public endpoint. This configuration must be overridden to connect using your private endpoint.</p><p>See <a href="https://docs.microsoft.com/en-us/azure/private-link/private-endpoint-dns" target="_blank" rel="noopener noreferrer"></a><a href="https://docs.microsoft.com/en-us/azure/private-link/private-endpoint-dns" target="_blank" rel="noopener noreferrer">https://docs.microsoft.com/en-us/azure/private-link/private-endpoint-dns</a></p><h2>Service Endpoint</h2><figure class="post__image"><img loading="lazy" src="https://jnnn.gs/media/posts/5/ServiceEndpoint.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://jnnn.gs/media/posts/5/responsive/ServiceEndpoint-xs.png 300w, https://jnnn.gs/media/posts/5/responsive/ServiceEndpoint-sm.png 480w, https://jnnn.gs/media/posts/5/responsive/ServiceEndpoint-md.png 768w, https://jnnn.gs/media/posts/5/responsive/ServiceEndpoint-lg.png 1024w, https://jnnn.gs/media/posts/5/responsive/ServiceEndpoint-xl.png 1360w, https://jnnn.gs/media/posts/5/responsive/ServiceEndpoint-2xl.png 1600w" alt="Service Endpoint" width="418" height="584"><figcaption>Figure: #4 Service Endpoint</figcaption></figure><p>Virtual network rule(s) can secure the Azure service resources to your virtual network. The rule addition provides improved security by fully removing public internet access to resources and allowing traffic only from your virtual network.</p><p>When service endpoint is enabled for storage accounts, the identity of the virtual network  will be made available to the storage account(s). All source IPs from the <br>VNET/Subnet(s) will be private IPs.<br><br>When the VM connects to the storage account, the storage account knows which virtual network and which subnet the request has come from. The VM IP visibile to the storage account will be the private IP address and not the public IP. The VM still believes it is connecting to the storage account public IP, but the traffic never leave the Azure  backbone. i.e. private IP is used</p><p><a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-service-endpoints-overview" target="_blank" rel="noopener noreferrer">https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-service-endpoints-overview</a></p><p><a href="https://www.youtube.com/watch?v=q8s-zmHighs" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=q8s-zmHighs</a></p><p><strong>When to use Service Endpoint</strong>:<br>  <br>When restricted or non-public internet access is required to an Azure PaaS component from an existing VNET</p><p><strong>Pros</strong></p><p>1.Simple set-up</p><p>   a.create service end point on VNET/Subnet(s)</p><p>   b.Limit storage account network access to same VNET/subnet(s)</p><p>2.No additional costs</p><p>3.Public address continued to be used, although Azure routing uses internal backbone*</p><p>4.No public internet traffic, by configuring PaaS service firewall rules</p><p><strong>Cons</strong></p><p>1.Public address exists although unusable</p><p>2.Any existing public IP firewall rules will need to be reconfigured</p><p>*Please note that no changes are required to the requesting PaaS component as this continues to use the public endpoint FQDN. Azure returns the private IP rather than the public IP, knowing that a service endpoint is in use.</p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on May 20, 2021</p><ul class="post__tag"><li><a href="https://jnnn.gs/tags/azure/">Azure</a></li><li><a href="https://jnnn.gs/tags/devops/">DevOps</a></li></ul><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fjnnn.gs%2Fazure-private-endpoints-vs-service-endpoints.html" class="js-share facebook" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="https://twitter.com/share?url=https%3A%2F%2Fjnnn.gs%2Fazure-private-endpoints-vs-service-endpoints.html&amp;via=%40jnnngs&amp;text=Azure%20Private%20Endpoints%20Vs%20Service%20Endpoints" class="js-share twitter" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#twitter"/></svg> <span>Twitter</span> </a><a href="http://www.linkedin.com/shareArticle?url=https%3A%2F%2Fjnnn.gs%2Fazure-private-endpoints-vs-service-endpoints.html&amp;title=Azure%20Private%20Endpoints%20Vs%20Service%20Endpoints" class="js-share linkedin" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#linkedin"/></svg> <span>LinkedIn</span> </a><a href="https://api.whatsapp.com/send?text=Azure%20Private%20Endpoints%20Vs%20Service%20Endpoints https%3A%2F%2Fjnnn.gs%2Fazure-private-endpoints-vs-service-endpoints.html" class="js-share whatsapp" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#whatsapp"/></svg> <span>WhatsApp</span></a></div><div class="post__bio bio"><div class="bio__info"><h3 class="bio__name"><a href="https://jnnn.gs/authors/paul-jennings/" class="invert" rel="author">Jnnngs</a></h3></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://jnnn.gs/webdav-urls-of-common-cloud-storage-services.html" class="invert post__nav-link" rel="prev"><span>Previous</span> WebDAV URLs of Common Cloud Storage Services</a></div><div class="post__nav-next"><a href="https://jnnn.gs/eth2-node-reduce-disk-space-usage.html" class="invert post__nav-link" rel="next"><span>Next</span> Reduce GETH ETH Node Disk Space Usage </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav><div class="post__related related"><div class="wrapper"><h2 class="h5 related__title">You should also read:</h2><article class="related__item"><div class="feed__meta"><time datetime="2021-12-21T12:08" class="feed__date">December 21, 2021</time></div><h3 class="h1"><a href="https://jnnn.gs/architecture-for-aws-vpc-internet-facing-public-subnet-with-private-subnet-backend.html" class="invert">Architecture for AWS VPC: Internet-facing Public subnet with Private subnet backend</a></h3></article><article class="related__item"><div class="feed__meta"><time datetime="2021-01-09T16:55" class="feed__date">January 9, 2021</time></div><h3 class="h1"><a href="https://jnnn.gs/webdav-urls-of-common-cloud-storage-services.html" class="invert">WebDAV URLs of Common Cloud Storage Services</a></h3></article></div></div></main><footer class="footer"><div class="footer__copyright"><p>jnnn.gs © 2021</p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://jnnn.gs/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>