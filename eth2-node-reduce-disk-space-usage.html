<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ETH2 Node Reduce Disk Space Usage - jnnngs</title><meta name="description" content="So, I have a ETH2 validator node which uses a Hetzner AX41 dedicated server and has been running since genesis. The set-up includes a GETH ETH1 node, beacon chain and the ETH2 Validator (Prysm) and is slowly using the allocated 1TB NVMe disk space (2&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://jnnn.gs/eth2-node-reduce-disk-space-usage.html"><link rel="alternate" type="application/atom+xml" href="https://jnnn.gs/feed.xml"><link rel="alternate" type="application/json" href="https://jnnn.gs/feed.json"><meta property="og:title" content="ETH2 Node Reduce Disk Space Usage"><meta property="og:site_name" content="jnnngs"><meta property="og:description" content="So, I have a ETH2 validator node which uses a Hetzner AX41 dedicated server and has been running since genesis. The set-up includes a GETH ETH1 node, beacon chain and the ETH2 Validator (Prysm) and is slowly using the allocated 1TB NVMe disk space (2&hellip;"><meta property="og:url" content="https://jnnn.gs/eth2-node-reduce-disk-space-usage.html"><meta property="og:type" content="article"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--logo-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--menu-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://jnnn.gs/assets/css/style.css?v=2405d04b119f74cf51b884beb85eb424"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://jnnn.gs/eth2-node-reduce-disk-space-usage.html"},"headline":"ETH2 Node Reduce Disk Space Usage","datePublished":"2021-03-26T15:02","dateModified":"2021-03-26T15:02","description":"So, I have a ETH2 validator node which uses a Hetzner AX41 dedicated server and has been running since genesis. The set-up includes a GETH ETH1 node, beacon chain and the ETH2 Validator (Prysm) and is slowly using the allocated 1TB NVMe disk space (2&hellip;","author":{"@type":"Person","name":"Jnnngs"},"publisher":{"@type":"Organization","name":"Jnnngs"}}</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://jnnn.gs/">jnnngs</a></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2021-03-26T15:02">March 26, 2021</time></div><h1>ETH2 Node Reduce Disk Space Usage</h1></div></header></div><div class="wrapper post__entry"><p>So, I have a ETH2 validator node which uses a Hetzner AX41 dedicated server and has been running since genesis. The set-up includes a GETH ETH1 node, beacon chain and the ETH2 Validator (Prysm) and is slowly using the allocated 1TB NVMe disk space (2 x 512GB using RAID 0). I reached out to the Prysm Discord channel to seek advice and what is best to do. A very friendly mod replied and I thought it useful to share in ase anyone else has the same challenge.</p><p>I'm planning to go with option 1, as I already have infura failover configured. Another option is to add 2 x more NVMe disks from Hetzner and then add them to the OS. This would mean 20 minutes downtime, so an option for future need.</p><p> </p><div id="chat-messages-825015216634593311" class="message-2qnXI6 cozyMessage-3V1Y8y wrapper-2a6GCs cozy-3raOZG zalgo-jN1Ica" tabindex="-1" role="listitem" data-list-item-id="chat-messages___chat-messages-825015216634593311"><div class="contents-2mQqc9" role="document"><div class="markup-2BOw-j messageContent-2qWWxC"><span style="color: #2dc26b;">1) Configure a failover eth1 - infura free or alchemy free - then offline snapshot prune geth. This requires 50 GiB free. If you have 25 GiB free, we have reports of it failing; more than 25 and less than 50, I guess you will be our guinea pig! Stop geth, and, as the user that geth runs at in production, do a snapshot prune. If geth runs in systemd, it might look like this: <code class="inline">tmux</code> so the prune doesn't get killed early, and then <code class="inline">sudo systemctl stop geth</code> and then <code class="inline">sudo -u GETHUSER geth --datadir /my/data/dir snapshot prune-state</code>. That will take about 4 hours, and then Geth will be back down to around 350 GiB used. The data dir and user will be recorded in <code class="inline">/etc/system/systemd/geth.service</code>, again assuming systemd and <code class="inline">geth</code> as the service name. If you are using eth2-docker, it's even easier; and I assume similar for stefa2k's docker tools. For eth2-docker: <code class="inline">docker-compose stop eth1 &amp;&amp; docker-compose rm eth1</code>, followed by <code class="inline">docker-compose run -d eth1 snapshot prune-state</code>. You can use <code class="inline">docker-compose logs -f eth1</code> to watch it, and when it's done, <code class="inline">docker-compose up -d eth1</code>.</span></div><div> </div><div class="markup-2BOw-j messageContent-2qWWxC"><span style="color: #2dc26b;">2) Stop using geth and rely on infura free with alchemy free failover, or vice versa. This works remarkably well before the consensus upgrade. After the consensus upgrade, running your own geth as an "application client" may be very desirable, but that's at least 9-12 months out.</span></div></div><div class="buttonContainer-DHceWr"><div class="buttons-cl5qTG container-3npvBV" aria-label="Message Actions"><div class="wrapper-2aW0bm"><div class="button-1ZiXG9" tabindex="0" role="button" aria-label="Add Reaction" aria-controls="popout_2378" aria-expanded="false"> </div><div class="button-1ZiXG9" tabindex="0" role="button" aria-label="More" aria-controls="popout_2379" aria-expanded="false"><span style="color: #2dc26b; font-family: var(--font-base); font-size: inherit; font-weight: var(--font-weight-normal);">So choose your adventure: 1) or 2)</span></div></div></div></div></div></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on March 26, 2021</p><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fjnnn.gs%2Feth2-node-reduce-disk-space-usage.html" class="js-share facebook" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="https://twitter.com/share?url=https%3A%2F%2Fjnnn.gs%2Feth2-node-reduce-disk-space-usage.html&amp;via=%40jnnngs&amp;text=ETH2%20Node%20Reduce%20Disk%20Space%20Usage" class="js-share twitter" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#twitter"/></svg> <span>Twitter</span> </a><a href="http://www.linkedin.com/shareArticle?url=https%3A%2F%2Fjnnn.gs%2Feth2-node-reduce-disk-space-usage.html&amp;title=ETH2%20Node%20Reduce%20Disk%20Space%20Usage" class="js-share linkedin" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#linkedin"/></svg> <span>LinkedIn</span> </a><a href="https://api.whatsapp.com/send?text=ETH2%20Node%20Reduce%20Disk%20Space%20Usage https%3A%2F%2Fjnnn.gs%2Feth2-node-reduce-disk-space-usage.html" class="js-share whatsapp" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#whatsapp"/></svg> <span>WhatsApp</span></a></div><div class="post__bio bio"><div class="bio__info"><h3 class="bio__name"><a href="https://jnnn.gs/authors/paul-jennings/" class="invert" rel="author">Jnnngs</a></h3></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://jnnn.gs/when-to-use-vnet-peering-vs-vpn-gateway-on-azure.html" class="invert post__nav-link" rel="prev"><span>Previous</span> When to use VNet Peering vs VPN Gateway on Azure</a></div></div></nav></main><footer class="footer"><div class="footer__copyright"><p>jnnn.gs © 2021</p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://jnnn.gs/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>