<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Reduce GETH ETH Node Disk Space Usage - jnnngs</title><meta name="description" content="So, I have a ETH2 validator node which uses a Hetzner AX41 dedicated server and has been running since genesis. The set-up includes a GETH ETH1 node, beacon chain and the ETH2 Validator (Prysm) and is slowly using the allocated 1TB NVMe disk space (2&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://jnnn.gs/eth2-node-reduce-disk-space-usage.html"><link rel="alternate" type="application/atom+xml" href="https://jnnn.gs/feed.xml"><link rel="alternate" type="application/json" href="https://jnnn.gs/feed.json"><meta property="og:title" content="Reduce GETH ETH Node Disk Space Usage"><meta property="og:site_name" content="jnnngs"><meta property="og:description" content="So, I have a ETH2 validator node which uses a Hetzner AX41 dedicated server and has been running since genesis. The set-up includes a GETH ETH1 node, beacon chain and the ETH2 Validator (Prysm) and is slowly using the allocated 1TB NVMe disk space (2&hellip;"><meta property="og:url" content="https://jnnn.gs/eth2-node-reduce-disk-space-usage.html"><meta property="og:type" content="article"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--logo-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--menu-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://jnnn.gs/assets/css/style.css?v=2405d04b119f74cf51b884beb85eb424"><link rel="stylesheet" href="https://jnnn.gs/assets/css/photoswipe.css?v=7331f6eb15671b2fc8e3ffd46e849f7b"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://jnnn.gs/eth2-node-reduce-disk-space-usage.html"},"headline":"Reduce GETH ETH Node Disk Space Usage","datePublished":"2021-03-26T15:02","dateModified":"2021-03-27T12:34","description":"So, I have a ETH2 validator node which uses a Hetzner AX41 dedicated server and has been running since genesis. The set-up includes a GETH ETH1 node, beacon chain and the ETH2 Validator (Prysm) and is slowly using the allocated 1TB NVMe disk space (2&hellip;","author":{"@type":"Person","name":"Jnnngs"},"publisher":{"@type":"Organization","name":"Jnnngs"}}</script><style>.pswp--svg .pswp__button,
				          .pswp--svg .pswp__button--arrow--left:before,
				          .pswp--svg .pswp__button--arrow--right:before {
					          background-image: url(https://jnnn.gs/assets/svg/gallery-icons-light.svg);
			              }</style></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://jnnn.gs/">jnnngs</a></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2021-03-26T15:02">March 26, 2021</time></div><h1>Reduce GETH ETH Node Disk Space Usage</h1></div></header></div><div class="wrapper post__entry"><p>So, I have a ETH2 validator node which uses a Hetzner AX41 dedicated server and has been running since genesis. The set-up includes a GETH ETH1 node, beacon chain and the ETH2 Validator (Prysm) and is slowly using the allocated 1TB NVMe disk space (2 x 512GB using RAID 0). I reached out to the Prysm Discord channel to seek advice and what is best to do. A very friendly chap replied and I thought it useful to share in case anyone else has the same challenge.</p><p>I'm planning to go with option 1, as I already have infura failover configured. Another option is to add 2 x more NVMe disks from Hetzner and then add them to the OS. This would mean 20 minutes downtime, so an option for future need.</p><div id="chat-messages-825015216634593311" class="message-2qnXI6 cozyMessage-3V1Y8y wrapper-2a6GCs cozy-3raOZG zalgo-jN1Ica" tabindex="-1" role="listitem" data-list-item-id="chat-messages___chat-messages-825015216634593311"><div class="contents-2mQqc9" role="document"><ol><li class="markup-2BOw-j messageContent-2qWWxC"><span style="color: #2dc26b;">Configure a failover eth1 - <a href="https://infura.io/" target="_blank" rel="noopener noreferrer">infura.io</a> free or <a href="https://alchemyapi.io/" target="_blank" rel="noopener noreferrer">alchemy.io</a> free - then offline snapshot prune geth. This requires 50 GiB free. If you have 25 GiB free, we have reports of it failing; more than 25 and less than 50, I guess you will be our guinea pig! Stop geth, and, as the user that geth runs at in production, do a snapshot prune. If geth runs in systemd, it might look like this: <code class="inline">tmux</code> so the prune doesn't get killed early, and then <code class="inline">sudo systemctl stop geth</code> and then <code class="inline">sudo -u GETHUSER geth --datadir /my/data/dir snapshot prune-state</code>. That will take about 4 hours, and then Geth will be back down to around 350 GiB used. The data dir and user will be recorded in <code class="inline">/etc/system/systemd/geth.service</code>, again assuming systemd and <code class="inline">geth</code> as the service name. If you are using eth2-docker, it's even easier; and I assume similar for stefa2k's docker tools. For eth2-docker: <code class="inline">docker-compose stop eth1 &amp;&amp; docker-compose rm eth1</code>, followed by <code class="inline">docker-compose run -d eth1 snapshot prune-state</code>. You can use <code class="inline">docker-compose logs -f eth1</code> to watch it, and when it's done, <code class="inline">docker-compose up -d eth1</code>.</span></li><li class="markup-2BOw-j messageContent-2qWWxC"><span style="color: #2dc26b;">Stop using geth and rely on infura free with alchemy free failover, or vice versa. This works remarkably well before the consensus upgrade. After the consensus upgrade, running your own geth as an "application client" may be very desirable, but that's at least 9-12 months out.</span></li></ol></div><div class="buttonContainer-DHceWr"><div class="buttons-cl5qTG container-3npvBV" aria-label="Message Actions"><div class="wrapper-2aW0bm"><div class="button-1ZiXG9" tabindex="0" role="button" aria-label="Add Reaction" aria-controls="popout_2378" aria-expanded="false"> </div><div class="button-1ZiXG9" tabindex="0" role="button" aria-label="More" aria-controls="popout_2379" aria-expanded="false"><span style="color: #2dc26b; font-family: var(--font-base); font-size: inherit; font-weight: var(--font-weight-normal);">So choose your adventure: 1) or 2)</span></div><div tabindex="0" role="button" aria-label="More" aria-controls="popout_2379" aria-expanded="false"> </div><div tabindex="0" role="button" aria-label="More" aria-controls="popout_2379" aria-expanded="false"><strong><a href="#INTERNAL_LINK#/post/null">UPDATE</a></strong>:</div><div tabindex="0" role="button" aria-label="More" aria-controls="popout_2379" aria-expanded="false">I came across a <a href="https://www.reddit.com/r/ethstaker/comments/m8ppq6/just_got_back_200gb_of_disk_space_from_geth/" target="_blank" rel="noopener noreferrer">Redit post</a> that used method 1 above although via the Geth Service method. This is the approach I followed and it was very simple to implement. Notes below...</div><div tabindex="0" role="button" aria-label="More" aria-controls="popout_2379" aria-expanded="false"> </div><div tabindex="0" role="button" aria-label="More" aria-controls="popout_2379" aria-expanded="false"><h2 style="margin: 0in; font-family: Calibri; font-size: 24.0pt; color: #1e4e79;">Simple way to prune GETH diskspace</h2><h2 style="margin: 0in; font-family: Calibri; font-size: 16.0pt; color: #1e4e79;"> </h2><address style="margin: 0in; font-family: Calibri; font-size: 16.0pt; color: #1e4e79;">Beacon-node set-up</address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;"> </address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;">#Set-up Beacon-chain failover for <span style="color: #2dc26b;"><a href="https://infura.io/" target="_blank" rel="noopener noreferrer">infura.io</a> <span style="color: #3598db;">free or</span> <a href="https://alchemyapi.io/" target="_blank" rel="noopener noreferrer">alchemy.io</a><span style="color: #3598db;"> free.</span></span></address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;"><em><span style="color: #2dc26b;"><span style="color: #3598db;"><a href="https://docs.prylabs.network/docs/prysm-usage/setup-eth1/#adding-fallback-eth1-nodes" target="_blank" rel="noopener noreferrer">#Prylabs fallback eth1 nodes documentation.</a></span></span></em></address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;"> </address><address class="token-line"><code><span class="token key atrule">http-web3provider</span><span class="token punctuation">:</span><span class="token plain"> http</span><span class="token punctuation">:</span><span class="token plain">//localhost</span><span class="token punctuation">:</span><span class="token number">8545</span></code></address><address class="token-line"><code><span class="token key atrule">fallback-web3provider</span><span class="token punctuation">:</span></code></address><address class="token-line"><code><span class="token punctuation">-</span><span class="token plain"> https</span><span class="token punctuation">:</span><span class="token plain">//mainnet.infura.io/v3/YOUR</span><span class="token punctuation">-</span><span class="token plain">PROJECT</span><span class="token punctuation">-</span><span class="token plain">ID</span></code></address><address class="token-line"><code><span class="token punctuation">-</span><span class="token plain"> https</span><span class="token punctuation">:</span><span class="token plain">//eth</span><span class="token punctuation">-</span><span class="token plain">mainnet.alchemyapi.io/v2/YOUR</span><span class="token punctuation">-</span><span class="token plain">PROJECT</span><span class="token punctuation">-</span><span class="token plain">ID</span></code></address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;"> </address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;">#Restart Beacon-node</address><address><code style="margin: 0in; font-family: Consolas; font-size: 11.0pt;">sudo service beacon-node restart</code></address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;"> </address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;">#Check  Beacon-node service status</address><address><code style="margin: 0in; font-family: Consolas; font-size: 11.0pt;">sudo service beacon-node status</code></address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;"> </address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;">#Check Beacon-node service logs for activity</address><address><code style="margin: 0in; font-family: Consolas; font-size: 11.0pt;">sudo journalctl -fu beacon-node</code></address><h2 style="margin: 0in; font-family: Calibri; font-size: 16.0pt; color: #1e4e79;"> </h2><address style="margin: 0in; font-family: Calibri; font-size: 16.0pt; color: #1e4e79;">Geth node pruning</address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;"> </address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;">#Check location of Geth working directory</address><address><code style="margin: 0in; font-family: Consolas; font-size: 11.0pt;">cat /etc/systemd/system/geth.service</code></address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;"> </address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;">#Get current size of GETH data location</address><address><code style="margin: 0in; font-family: Consolas; font-size: 11.0pt;">du -sh &lt;WorkingDirectory&gt;</code></address><address style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"> </address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;">#Stop Geth</address><address><code style="margin: 0in; font-family: Consolas; font-size: 11.0pt;">sudo service geth stop</code></address><address style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"> </address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;">#Change Service to Prune</address><address><code style="margin: 0in; font-family: Consolas; font-size: 11.0pt;">vi /etc/systemd/system/geth.service</code></address><address style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"> </address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;"><span style="font-style: italic;">[Comment out existing ExecStart using a #]</span></address><address><code style="margin: 0in; font-family: Consolas; font-size: 11.0pt;"><strong><span style="color: #fa0000;">#</span></strong>ExecStart=/usr/bin/geth blah blah blah</code></address><address style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"> </address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;"><span style="font-style: italic;">[Add new ExecStart to prune]</span></address><address><code style="margin: 0in; font-family: Consolas; font-size: 11.0pt;">ExecStart=/usr/bin/geth snapshot prune-state</code></address><address style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"> </address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;">#Reload Service config</address><address><code style="margin: 0in; font-family: Consolas; font-size: 11.0pt;">sudo systemctl daemon-reload</code></address><address style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"> </address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;">#Start Geth Pruning</address><address><code style="margin: 0in; font-family: Consolas; font-size: 11.0pt;">sudo service geth start</code></address><address style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"> </address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;">#Check Geth service status</address><address><code style="margin: 0in; font-family: Consolas; font-size: 11.0pt;">sudo service geth status</code></address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;"> </address><address style="margin: 0in; font-family: Calibri; font-size: 12.0pt; color: #5b9bd5;">#Check Geth service logs for pruning activity</address><address><code style="margin: 0in; font-family: Consolas; font-size: 11.0pt;">sudo journalctl -fu geth</code></address><address style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"> </address><address style="margin: 0in; font-family: Calibri; font-size: 11.0pt; color: #595959;"><span style="font-style: italic;">Logs should look something like this and can take up to 4 hours to complete…</span></address><div class="gallery-wrapper"><div class="gallery" data-is-empty="false" data-columns="3"><figure class="gallery__item"><a href="https://jnnn.gs/media/posts/7/gallery/GethPrune.png" data-size="1333x418"><img loading="lazy" src="https://jnnn.gs/media/posts/7/gallery/GethPrune-thumbnail.png" alt="Pruning" width="720" height="226"></a><figcaption>Pruning Geth</figcaption></figure><figure class="gallery__item"><a href="https://jnnn.gs/media/posts/7/gallery/GethCompact.png" data-size="1357x418"><img loading="lazy" src="https://jnnn.gs/media/posts/7/gallery/GethCompact-thumbnail.png" alt="Compressing" width="720" height="222"></a><figcaption>Compressing Geth dB</figcaption></figure></div></div><address><cite style="margin: 0in; font-family: Calibri; font-size: 9.0pt; color: #595959;"> </cite><span style="font-style: italic;">Once pruning and dB compacting has finished,</span></address><ol style="margin-left: .375in; direction: ltr; unicode-bidi: embed; margin-top: 0in; margin-bottom: 0in; font-family: Calibri; font-size: 11.0pt; font-weight: normal; font-style: normal;" type="1"><li style="margin-top: 0; margin-bottom: 0; vertical-align: middle;" value="1"><address><span style="font-family: Calibri; font-size: 11.0pt; font-weight: normal; font-style: normal;">Stop Geth</span></address></li><li style="margin-top: 0; margin-bottom: 0; vertical-align: middle;"><address><span style="font-family: Calibri; font-size: 11.0pt;">Change Service ExecStart back to original config (comment out Prune line and uncomment original one)</span></address></li><li style="margin-top: 0; margin-bottom: 0; vertical-align: middle;"><address><span style="font-family: Calibri; font-size: 11.0pt;">Reload Service config</span></address></li><li style="margin-top: 0; margin-bottom: 0; vertical-align: middle;"><address><span style="font-family: Calibri; font-size: 11.0pt;">Start Geth</span></address></li><li style="margin-top: 0; margin-bottom: 0; vertical-align: middle;"><address><span style="font-family: Calibri; font-size: 11.0pt;">Check Service status</span></address></li><li style="margin-top: 0; margin-bottom: 0; vertical-align: middle;"><address><span style="font-family: Calibri; font-size: 11.0pt;">Check Geth logs</span></address></li><li><address>Check Geth working directory size again</address></li></ol><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"> </p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">Boom!</p></div></div></div></div></div></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on March 27, 2021</p><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fjnnn.gs%2Feth2-node-reduce-disk-space-usage.html" class="js-share facebook" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="https://twitter.com/share?url=https%3A%2F%2Fjnnn.gs%2Feth2-node-reduce-disk-space-usage.html&amp;via=%40jnnngs&amp;text=Reduce%20GETH%20ETH%20Node%20Disk%20Space%20Usage" class="js-share twitter" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#twitter"/></svg> <span>Twitter</span> </a><a href="http://www.linkedin.com/shareArticle?url=https%3A%2F%2Fjnnn.gs%2Feth2-node-reduce-disk-space-usage.html&amp;title=Reduce%20GETH%20ETH%20Node%20Disk%20Space%20Usage" class="js-share linkedin" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#linkedin"/></svg> <span>LinkedIn</span> </a><a href="https://api.whatsapp.com/send?text=Reduce%20GETH%20ETH%20Node%20Disk%20Space%20Usage https%3A%2F%2Fjnnn.gs%2Feth2-node-reduce-disk-space-usage.html" class="js-share whatsapp" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#whatsapp"/></svg> <span>WhatsApp</span></a></div><div class="post__bio bio"><div class="bio__info"><h3 class="bio__name"><a href="https://jnnn.gs/authors/paul-jennings/" class="invert" rel="author">Jnnngs</a></h3></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://jnnn.gs/when-to-use-vnet-peering-vs-vpn-gateway-on-azure.html" class="invert post__nav-link" rel="prev"><span>Previous</span> When to use VNet Peering vs VPN Gateway on Azure</a></div></div></nav></main><footer class="footer"><div class="footer__copyright"><p>jnnn.gs © 2021</p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://jnnn.gs/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script defer="defer" src="https://jnnn.gs/assets/js/photoswipe.min.js?v=b586a3bc288c989ecce7b81b48e35855"></script><script defer="defer" src="https://jnnn.gs/assets/js/photoswipe-ui-default.min.js?v=9952f77ca2b8fbc9449a268008ea8dee"></script><script>var initPhotoSwipeFromDOM=function(gallerySelector){var parseThumbnailElements=function(el){var thumbElements=el.childNodes,numNodes=thumbElements.length,items=[],figureEl,linkEl,size,item;for(var i=0;i<numNodes;i++){figureEl=thumbElements[i];if(figureEl.nodeType!==1){continue;}
          linkEl=figureEl.children[0];size=linkEl.getAttribute('data-size').split('x');item={src:linkEl.getAttribute('href'),w:parseInt(size[0],10),h:parseInt(size[1],10)};if(figureEl.children.length>1){item.title=figureEl.children[1].innerHTML;}
          if(linkEl.children.length>0){item.msrc=linkEl.children[0].getAttribute('src');}
          item.el=figureEl;items.push(item);}
          return items;};var closest=function closest(el,fn){return el&&(fn(el)?el:closest(el.parentNode,fn));};var onThumbnailsClick=function(e){e=e||window.event;e.preventDefault?e.preventDefault():e.returnValue=false;var eTarget=e.target||e.srcElement;var clickedListItem=closest(eTarget,function(el){return(el.tagName&&el.tagName.toUpperCase()==='FIGURE');});if(!clickedListItem){return;}
          var clickedGallery=clickedListItem.parentNode,childNodes=clickedListItem.parentNode.childNodes,numChildNodes=childNodes.length,nodeIndex=0,index;for(var i=0;i<numChildNodes;i++){if(childNodes[i].nodeType!==1){continue;}
          if(childNodes[i]===clickedListItem){index=nodeIndex;break;}
          nodeIndex++;}
          if(index>=0){openPhotoSwipe(index,clickedGallery);}
          return false;};var photoswipeParseHash=function(){var hash=window.location.hash.substring(1),params={};if(hash.length<5){return params;}
          var vars=hash.split('&');for(var i=0;i<vars.length;i++){if(!vars[i]){continue;}
          var pair=vars[i].split('=');if(pair.length<2){continue;}
          params[pair[0]]=pair[1];}
          if(params.gid){params.gid=parseInt(params.gid,10);}
          return params;};var openPhotoSwipe=function(index,galleryElement,disableAnimation,fromURL){var pswpElement=document.querySelectorAll('.pswp')[0],gallery,options,items;items=parseThumbnailElements(galleryElement);options={galleryUID:galleryElement.getAttribute('data-pswp-uid'),getThumbBoundsFn:function(index){var thumbnail=items[index].el.getElementsByTagName('img')[0],pageYScroll=window.pageYOffset||document.documentElement.scrollTop,rect=thumbnail.getBoundingClientRect();return{x:rect.left,y:rect.top+pageYScroll,w:rect.width};},
          mainClass:'pswp--dark',
          preload: [1,2],
          hideAnimationDuration:200,
          showAnimationDuration:0,
          bgOpacity: 0.7,
          showHideOpacity:true,
          closeOnScroll: true,
          arrowKeys: true,
          closeEl: true,
          captionEl: true,
          fullscreenEl: true,
          zoomEl: true,
          shareEl: true,
          counterEl: true,
          arrowEl: true,
          preloaderEl: true
          };if(fromURL){if(options.galleryPIDs){for(var j=0;j<items.length;j++){if(items[j].pid==index){options.index=j;break;}}}else{options.index=parseInt(index,10)-1;}}else{options.index=parseInt(index,10);}
          if(isNaN(options.index)){return;}
          if(disableAnimation){options.showAnimationDuration=0;}
          gallery=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,options);gallery.init();gallery.options.escKey=true;};var galleryElements=document.querySelectorAll(gallerySelector);for(var i=0,l=galleryElements.length;i<l;i++){galleryElements[i].setAttribute('data-pswp-uid',i+1);galleryElements[i].onclick=onThumbnailsClick;}
          var hashData=photoswipeParseHash();if(hashData.pid&&hashData.gid){openPhotoSwipe(hashData.pid,galleryElements[hashData.gid-1],true,true);}};initPhotoSwipeFromDOM('.gallery');</script><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button><button class="pswp__button pswp__button--share" title="Share"></button><button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button><button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button><button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></body></html>