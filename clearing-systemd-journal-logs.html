<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Clearing systemd journal logs - jnnngs</title><meta name="description" content="The systemd journal is systemd’s own logging system. It is equivalent to the syslog in the init system. It collects and stored kernel logging data, system log messages, standard output and error for various systemd services. A Linux machine with systemd writes the logs to /var/log/journal directory."><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://jnnn.gs/clearing-systemd-journal-logs.html"><link rel="alternate" type="application/atom+xml" href="https://jnnn.gs/feed.xml"><link rel="alternate" type="application/json" href="https://jnnn.gs/feed.json"><meta property="og:title" content="Clearing systemd journal logs"><meta property="og:site_name" content="jnnngs"><meta property="og:description" content="The systemd journal is systemd’s own logging system. It is equivalent to the syslog in the init system. It collects and stored kernel logging data, system log messages, standard output and error for various systemd services. A Linux machine with systemd writes the logs to /var/log/journal directory."><meta property="og:url" content="https://jnnn.gs/clearing-systemd-journal-logs.html"><meta property="og:type" content="article"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--logo-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--menu-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://jnnn.gs/assets/css/style.css?v=2405d04b119f74cf51b884beb85eb424"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://jnnn.gs/clearing-systemd-journal-logs.html"},"headline":"Clearing systemd journal logs","datePublished":"2021-10-06T19:12","dateModified":"2021-10-19T16:19","description":"The systemd journal is systemd’s own logging system. It is equivalent to the syslog in the init system. It collects and stored kernel logging data, system log messages, standard output and error for various systemd services. A Linux machine with systemd writes the logs to /var/log/journal directory.","author":{"@type":"Person","name":"Jnnngs"},"publisher":{"@type":"Organization","name":"Jnnngs"}}</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://jnnn.gs/">jnnngs</a></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2021-10-06T19:12">October 6, 2021</time></div><h1>Clearing systemd journal logs</h1></div></header></div><div class="wrapper post__entry"><p>The <a href="https://wiki.archlinux.org/index.php/Systemd/Journal" rel="noreferrer noopener" target="_blank">systemd journal</a> is systemd’s own logging system. It is equivalent to the syslog in the init system. It collects and stored kernel logging data, system log messages, standard output and error for various systemd services.</p><p>A Linux machine with systemd writes the logs to /var/log/journal directory. If you remember the <a href="https://linuxhandbook.com/linux-directory-structure/" rel="noreferrer noopener">Linux directory structure</a>, /var is where the system logs are stored.</p><p>You can either manually view the log files <a href="https://linuxhandbook.com/less-command/" rel="noreferrer noopener">using less command</a> or <a href="https://linuxhandbook.com/journalctl-command/">use the journalctl command</a>. To view all the latest logs, use the command with reverse option.</p><pre><code>journalctl -r</code><code><br></code></pre><p>The thing with logging is that over the time, it starts to grow big. And if you <a href="https://linuxhandbook.com/df-command/" rel="noreferrer noopener">check the disk space in Linux</a>, you’ll see that sometimes, it takes several GB of space.</p><p>First check the space taken by journal logs with the <a href="https://linuxhandbook.com/find-directory-size-du-command/" rel="noreferrer noopener">du command</a>:</p><pre><code>du -sh /var/log/journal/</code></pre><p>You can also use the journalctl command for the same task:</p><pre><code>journalctl --disk-usage</code></pre><p>Both of the command should give approximately the same result:</p><pre><code>abhishek@linuxhandbook:~$ journalctl --disk-usage
Archived and active journals take up 1.6G in the file system.

abhishek@linuxhandbook:~$ sudo du -sh /var/log/journal/
1.7G	/var/log/journal/</code></pre><p>Now that you know how much space the journal logs take, you can decide if you want to clear the logs or not. If you decide to clear the journal logs, let me show you a couple of ways of doing it.</p><p>You can of course use the rm command to delete the files in the log folder but I won’t advise that. The journalctl command gives you the proper way of handling old logs.</p><p>First thing you should do is to rotate journal files. This will mark the currently active journal logs as archive and create fresh new logs. It’s optional but a good practice to do so.</p><pre><code>sudo journalctl --rotate</code></pre><p>Now you have three ways to clear old journal logs. You delete logs older than a certain time or you delete older log files so that total log size is limited to the predefined disk space or you limit number of log files. Let’s see how to use all three methods.</p><h3 id="1-clear-journal-log-older-than-x-days">1. Clear journal log older than x days</h3><p>Keep in mind that logs are important for auditing purpose so you should not delete all of them at the same time. Let’s say you want to keep the log history of just two days. To delete all entries older than two days, use this command:</p><pre><code>sudo journalctl --vacuum-time=2d</code></pre><p>Here’s what the output may look like:</p><pre><code>Vacuuming done, freed 1.6G of archived journals from /var/log/journal/1b9ab93094fa4978beba80fd3c48a18c</code></pre><p>You can also change the provide time frame in hours like 2h, in minutes like 2m, in seconds like 2s. If you want bigger time units, you can 2weeks, 2months as well.</p><h3 id="2-restrict-logs-to-a-certain-size">2. Restrict logs to a certain size</h3><p>Another way is to restrict the log size. With this, it will delete the journal log files until the disk space taken by journal logs falls below the size you specified.</p><pre><code>sudo journalctl --vacuum-size=100M</code></pre><p>This will reduce the log size to around 100 MB.</p><pre><code>Vacuuming done, freed 40.0M of archived journals from /var/log/journal/1b9ab93094fa4978beba80fd3c48a18c.</code></pre><p>You can specify the size in GB with G, MB with M, KB with K etc.</p><h3 id="3-restrict-number-of-log-files">3. Restrict number of log files</h3><p>The third way is to limit the number of log files. The journalctl usually has log files for the system and for the users. As the logs get old they are archived in various files.</p><p>You can limit the number of archive log files. Let’s say you want to have only five log files.</p><pre><code>journalctl --vacuum-files=5</code></pre><p>It will remove the older archive log files leaving only the specified number of log files.</p><pre><code>Deleted archived journal /var/log/journal/1b9ab93094fa4978beba80fd3c48a18c/system@d9fbc18533be4cb69483adf2a61505ac-00000000001e0bba-00059745988c0982.journal (8.0M).
Deleted archived journal /var/log/journal/1b9ab93094fa4978beba80fd3c48a18c/user-1000@f571e91e5c6748a8a74666a448df78dd-00000000001e21d4-00059747a2ebd5a3.journal (48.0M).
Deleted archived journal /var/log/journal/1b9ab93094fa4978beba80fd3c48a18c/system@d9fbc18533be4cb69483adf2a61505ac-00000000001e2414-00059747a32024d0.journal (48.0M).
Vacuuming done, freed 104.0M of archived journals from /var/log/journal/1b9ab93</code></pre></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on October 19, 2021</p><ul class="post__tag"><li><a href="https://jnnn.gs/tags/devops/">DevOps</a></li><li><a href="https://jnnn.gs/tags/eth2/">ETH2</a></li></ul><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fjnnn.gs%2Fclearing-systemd-journal-logs.html" class="js-share facebook" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="https://twitter.com/share?url=https%3A%2F%2Fjnnn.gs%2Fclearing-systemd-journal-logs.html&amp;via=%40jnnngs&amp;text=Clearing%20systemd%20journal%20logs" class="js-share twitter" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#twitter"/></svg> <span>Twitter</span> </a><a href="http://www.linkedin.com/shareArticle?url=https%3A%2F%2Fjnnn.gs%2Fclearing-systemd-journal-logs.html&amp;title=Clearing%20systemd%20journal%20logs" class="js-share linkedin" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#linkedin"/></svg> <span>LinkedIn</span> </a><a href="https://api.whatsapp.com/send?text=Clearing%20systemd%20journal%20logs https%3A%2F%2Fjnnn.gs%2Fclearing-systemd-journal-logs.html" class="js-share whatsapp" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#whatsapp"/></svg> <span>WhatsApp</span></a></div><div class="post__bio bio"><div class="bio__info"><h3 class="bio__name"><a href="https://jnnn.gs/authors/paul-jennings/" class="invert" rel="author">Jnnngs</a></h3></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://jnnn.gs/full-roast-chicken-biryani.html" class="invert post__nav-link" rel="prev"><span>Previous</span> Full Roast Chicken Biryani</a></div></div></nav></main><footer class="footer"><div class="footer__copyright"><p>jnnn.gs © 2021</p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://jnnn.gs/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://jnnn.gs/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>